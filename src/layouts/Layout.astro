---
import Navigation from "../components/Navigation.astro";
import Footer from "../components/Footer.astro";
import StructuredData from "../components/StructuredData.astro";

interface Props {
	title: string;
	description?: string;
	image?: string;
}

const { title, description, image } = Astro.props;

// Default values
const defaultDescription =
	"Kourtney Kitchens - Author of The Harvest, encouraging women to pursue deep relationship with Jesus and share their faith authentically in everyday life.";
const pageDescription = description || defaultDescription;
const siteURL = Astro.site || "https://kourtneykitchens.com";
const canonicalURL = new URL(Astro.url.pathname, siteURL);
// For Open Graph image, use a relative path
const ogImage = image || "/images/homepagePic.jpeg";
const fullImageURL = new URL(ogImage, siteURL);

// Ensure title includes "Kourtney Kitchens" if not already present
const pageTitle = title.includes("Kourtney Kitchens")
	? title
	: `${title} | Kourtney Kitchens`;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content={pageDescription} />
		<meta name="author" content="Kourtney Kitchens" />
		<meta name="generator" content={Astro.generator} />

		<!-- Canonical URL -->
		<link rel="canonical" href={canonicalURL} />

		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:url" content={canonicalURL} />
		<meta property="og:title" content={pageTitle} />
		<meta property="og:description" content={pageDescription} />
		<meta property="og:image" content={fullImageURL} />
		<meta property="og:image:width" content="1200" />
		<meta property="og:image:height" content="630" />
		<meta property="og:image:alt" content={pageTitle} />
		<meta property="og:site_name" content="Kourtney Kitchens" />

		<!-- Twitter Card -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content={pageTitle} />
		<meta name="twitter:description" content={pageDescription} />
		<meta name="twitter:image" content={fullImageURL} />
		<meta name="twitter:image:alt" content={pageTitle} />

		<!-- Favicon -->
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />

		<!-- Preload critical fonts to prevent FOUT -->
		<link
			rel="preload"
			href="/fonts/Salonica.ttf"
			as="font"
			type="font/ttf"
			crossorigin="anonymous"
		/>
		<link
			rel="preload"
			href="/fonts/Lora-VariableFont_wght.ttf"
			as="font"
			type="font/ttf"
			crossorigin="anonymous"
		/>
		<link
			rel="preload"
			href="/fonts/Imbue-VariableFont_opsz,wght.ttf"
			as="font"
			type="font/ttf"
			crossorigin="anonymous"
		/>

		<title>{pageTitle}</title>

		<StructuredData />
	</head>
	<header>
		<nav>
			<Navigation />
		</nav>
	</header>

	<body>
		<slot />
	</body>
	<footer>
		<Footer />
	</footer>
</html>
<style is:global>
	@font-face {
		font-family: "Lora";
		src: url("/fonts/Lora-VariableFont_wght.ttf") format("truetype");
		font-weight: 100 900;
		font-style: normal;
		font-display: block;
	}

	@font-face {
		font-family: "Salonica";
		src: url("/fonts/Salonica.ttf") format("truetype");
		font-weight: normal;
		font-style: normal;
		font-display: block;
	}
	body {
		background: #edeae9;
	}
	p {
		/* font-family: 'Lora', sans-serif; */
	}

	#nav-links {
		font-family: "Lora", sans-serif;
	}

	#footer-name {
		font-family: "Salonica", sans-serif;
	}
</style>

<script>
	import "../scripts/menu.js";
	import "../scripts/scroll-animate.js";
</script>
